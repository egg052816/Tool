<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>XTS Retry List & Flash Flow (SOP Mode)</title>
  <style>
    /* --- 增加平滑捲動效果 --- */
    html {
      scroll-behavior: smooth;
    }

    /* --- 現代科技文件配色 (Modern Tech Doc Theme) --- */
    :root {
      /* 背景與基底 */
      --bg-body: #f1f5f9;       /* 雲霧灰藍：更有質感的背景 */
      --bg-card: #ffffff;       /* 純白卡片 */
      --bg-card-hover: #f8fafc; /* 懸停時極淺灰 */

      /* 邊框與分隔線 */
      --border-color: #cbd5e1;  /* 邊框顏色加深一點，增加清晰度 */

      /* 文字系統 (Slate) */
      --text-main: #334155;     /* 主要內文：深灰藍 */
      --text-muted: #64748b;    /* 次要資訊：中灰 */
      --text-strong: #0f172a;   /* 標題強調：極深藍黑 */

      /* 品牌強調色 */
      --accent-primary: #0e7490; /* 主色：深湖水綠 (Teal) - 專業、冷靜 */
      --accent-secondary: #4f46e5; /* 次要：靛藍 (Indigo) - 用於標籤 */
      --accent-warning: #d97706;   /* 警示：深琥珀 (Amber) - 用於注意 */

      /* 程式碼區塊 */
      --code-text-red: #0f172a;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 45px 30px;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background-color: var(--bg-body);
      color: var(--text-main);
      line-height: 1.7;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    /* --- Header 設計 --- */
    .flash-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 40px;
      padding-bottom: 28px;
      border-bottom: 4px solid var(--accent-primary);
      flex-wrap: wrap;
      gap: 20px;
    }

    .flash-header-content {
      flex: 1;
    }

    .flash-header-title {
      font-size: 34px;
      font-weight: 800;
      letter-spacing: -0.5px;
      margin-bottom: 12px;
      color: var(--text-strong);
    }

    /* 修改為按鈕樣式 */
    .flash-suite-tag {
      padding: 10px 22px;
      border-radius: 8px;
      background: var(--accent-primary);
      font-size: 14px;
      font-weight: 700;
      color: #ffffff;
      letter-spacing: 1px;
      white-space: nowrap;
      box-shadow: 0 4px 6px -1px rgba(14, 116, 144, 0.3);
      text-decoration: none; /* 去除底線 */
      display: inline-block;
      transition: all 0.2s ease; /* 加入過渡動畫 */
      cursor: pointer;
    }

    /* 滑鼠懸停效果 */
    .flash-suite-tag:hover {
      background: #155e75; /* 加深顏色 */
      transform: translateY(-2px); /* 微微上浮 */
      box-shadow: 0 6px 12px rgba(14, 116, 144, 0.4);
    }

    /* --- 卡片區塊設計 --- */
    .flash-section {
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      padding: 38px;
      margin-bottom: 32px;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
      transition: all 0.2s ease;
      scroll-margin-top: 100px; /* 預留捲動後的頂部空間，避免被 Header 遮擋 */
    }

    .flash-section:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 20px -5px rgba(0, 0, 0, 0.1), 0 6px 8px -4px rgba(0, 0, 0, 0.05);
    }

    .flash-section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 26px;
      padding-bottom: 16px;
      border-bottom: 1px dashed var(--border-color);
    }

    .flash-section-title {
      font-size: 26px;
      font-weight: 700;
      color: var(--text-strong);
      display: flex;
      align-items: center;
    }

    .flash-section-title::before {
      content: '';
      display: inline-block;
      width: 9px;
      height: 28px;
      background: var(--accent-primary);
      margin-right: 16px;
      border-radius: 4px;
    }

    .flash-section-tag {
      font-size: 13px;
      padding: 5px 14px;
      border-radius: 99px;
      background: #f1f5f9;
      color: var(--text-muted);
      font-weight: 600;
      border: 1px solid var(--border-color);
      text-transform: uppercase;
    }

    /* --- 文字與列表 --- */
    p {
      margin: 0 0 18px 0;
      font-size: 18px;
      color: var(--text-main);
    }

    strong {
      color: var(--accent-primary);
      font-weight: 700;
    }

    ul, ol {
      margin: 0 0 26px 0;
      padding-left: 28px;
      color: var(--text-main);
    }

    li {
      margin-bottom: 12px;
      font-size: 18px;
    }

    /* --- 圖片樣式 --- */
    img {
      max-width: 100%;
      height: auto;
      border-radius: 12px;
      margin: 24px 0 40px 0;
      border: 1px solid var(--border-color);
      box-shadow: 0 8px 16px rgba(0,0,0,0.08);
      display: block;
    }

    .sop-image {
        max-width: 85%;
    }
    @media (max-width: 768px) {
        .sop-image {
            max-width: 100%;
        }
    }

    /* --- 表格樣式 --- */
    .table-container {
      overflow-x: auto;
      border-radius: 12px;
      border: 1px solid var(--border-color);
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }

    .flash-flow-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 17px;
      background: var(--bg-card);
    }

    .flash-flow-table th {
      background: linear-gradient(to bottom, #f8fafc, #f1f5f9);
      color: var(--text-strong);
      text-align: left;
      padding: 20px;
      font-weight: 700;
      border-bottom: 3px solid var(--accent-primary);
      white-space: nowrap;
    }

    .flash-flow-table td {
      padding: 20px;
      border-bottom: 1px solid var(--border-color);
      border-right: 1px solid #f1f5f9;
      vertical-align: top;
      color: var(--text-main);
    }

    .flash-flow-table tbody tr:hover {
      background: #f0f9ff;
    }

    /* --- Badges --- */
    .flash-badge {
      display: inline-flex;
      align-items: center;
      padding: 5px 14px;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 700;
      margin: 3px 8px 3px 0;
      letter-spacing: 0.5px;
      box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }
    .flash-badge-cts { background: #fef3c7; color: #92400e; border: 1px solid #fbbf24; }
    .flash-badge-gts { background: #ccfbf1; color: #115e59; border: 1px solid #5eead4; }
    .flash-badge-sts { background: #ffedd5; color: #9a3412; border: 1px solid #fdba74; }
    .flash-badge-vts { background: #e0f2fe; color: #075985; border: 1px solid #7dd3fc; }

    /* --- 程式碼與路徑 --- */
    code {
      font-family: 'Consolas', 'Monaco', monospace;
      background: none;
      color: var(--code-text-red);
      padding: 0 3px;
      font-size: 1em;
      font-weight: 700;
      border: none;
      word-break: break-all;
    }

    /* --- Note / Alert Box --- */
    .flash-note {
      background: #fffbeb;
      border-left: 6px solid var(--accent-warning);
      padding: 22px 28px;
      border-radius: 0 10px 10px 0;
      font-size: 18px;
      color: #92400e;
      margin-top: 28px;
      box-shadow: 0 2px 4px rgba(251, 191, 36, 0.1);
    }

    /* --- SOP Step Container --- */
    .sop-step {
        margin-bottom: 45px;
        padding-bottom: 28px;
        border-bottom: 2px dashed var(--border-color);
        position: relative;
    }
    .sop-step:last-child {
        border-bottom: none;
    }

    .sop-step-title {
        font-weight: 800;
        font-size: 22px;
        color: var(--accent-primary);
        margin-bottom: 20px;
        display: block;
        padding-left: 14px;
        border-left: 5px solid var(--accent-secondary);
    }

    /* --- Back Link --- */
    .back-link {
      margin-top: 70px;
      text-align: center;
      padding-top: 36px;
      border-top: 1px solid var(--border-color);
    }

    .back-link a {
      text-decoration: none;
      color: var(--accent-primary);
      font-weight: 700;
      font-size: 16px;
      padding: 14px 38px;
      border: 3px solid var(--accent-primary);
      border-radius: 99px;
      transition: all 0.2s ease;
      display: inline-block;
    }

    .back-link a:hover {
      background: var(--accent-primary);
      color: #ffffff;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(14, 116, 144, 0.3);
    }
  </style>
</head>
<body>

<div class="container">

  <div class="flash-header">
    <div class="flash-header-content">
      <div class="flash-header-title">Flash SW Flow / 燒錄流程 SOP</div>
    </div>
    <a href="#user-build" class="flash-suite-tag">User / UserDebug Build</a>
    <a href="#gsi" class="flash-suite-tag">GSI</a>
    <a href="#vts" class="flash-suite-tag">VTS</a>
  </div>

  <div class="flash-section">
    <div class="flash-section-header">
      <div class="flash-section-title">前情提要</div>
      <span class="flash-section-tag">General Rules</span>
    </div>
    <p>✯ <strong>除了 STS 外，所有 XTS 測試項目（CTS / CTS Verifier / GTS / GTS-Interactive / GTS-Root / CTS-on-GSI / VTS…）以及 Pretest，一律先燒錄 User Build SW。</strong></p>
    <p>✯ 只有 <strong>STS</strong> 測試會燒 <strong>Userdebug SW</strong>。</p>
    <p>✯ <strong>Android 15（A15）以上版本</strong> 新增額外側項：</p>
    <ul>
      <li>A15 以上：需依圖燒錄 <strong>GTS-Root</strong> 進行測試。</li>
      <li>A15 以下：<strong>不需要</strong> 燒錄 GTS-Root，其他流程相同。</li>
    </ul>
  </div>

  <div class="flash-section">
    <div class="flash-section-header">
      <div class="flash-section-title">Flash Flow 對照表</div>
      <span class="flash-section-tag">XTS From</span>
    </div>

    <div style="text-align: center;">
        <img src="{{ url_for('static', filename='Flash.jpg') }}" alt="Flash Flow Diagram">
    </div>

  </div>

  <div class="flash-section">
    <div class="flash-section-header">
      <div class="flash-section-title">版本來源與 Flash SOP</div>
      <span class="flash-section-tag">Image & SOP</span>
    </div>

    <p><strong>客戶提供的版本 Image：</strong></p>
    <ul>
      <li>PM 會將客戶提供之版本放置於：<br>
        <code>\\10.57.45.213\3pl\該專案名稱</code>
      </li>
    </ul>

    <p><strong>若客戶未提供燒錄 SOP：</strong></p>
    <ul>
      <li>PM 也會將整理好的通用 Flash SOP 放在：<br>
        <code>\\10.57.45.213\3pl\Ready_to_GoogleDrive\Flash_sop</code>
      </li>
      <li>實際執行時，仍需依照「客戶 / 專案」的要求選擇正確的 SOP 流程。</li>
    </ul>
  </div>

  <div class="flash-section" id="user-build">
    <div class="flash-section-header">
      <div class="flash-section-title">User / UserDebug Build 燒錄教學</div>
      <span class="flash-section-tag">SOP Steps</span>
    </div>

    <div class="sop-step">
        <span class="sop-step-title">步驟 1：取得燒錄檔案</span>
        <p><strong>進入 3pl 資料夾後，3 種 zip 直接抓下來：</strong></p>
        <img src="{{ url_for('static', filename='Flash2.jpg') }}" class="sop-image" alt="Flash2 檔案列表">
        <ol>
          <li>
            <strong>User Build:</strong> 以下圖為例，客戶提供了 windows 環境的 bat 檔 跟 Linux 環境的 sh 檔。
            <img src="{{ url_for('static', filename='Flash3.jpg') }}" class="sop-image" alt="Flash3 腳本範例" style="margin-top: 10px;">
          </li>
          <li><strong>UserDebug Build:</strong> 概念跟 User Build 一樣，只是要注意彼此不同包。</li>
          <li><strong>客戶自家燒錄 Tool 及 Driver:</strong> (Tool 因每一家客戶不同就不多作介紹)</li>
        </ol>
    </div>

    <div class="flash-note">
        ★ Linux 的電腦有內建通用驅動，因此不須額外更新Driver就能直接燒錄。<br>
        若為Windows環境，大多數樣機在燒錄時都需要進入 Bootloader Mode 更新驅動程式，詳細資訊依照客戶SOP為主。
    </div>

    <div style="background: #f8fafc; border-radius: 12px; padding: 32px; margin-top: 32px; border: 2px solid var(--border-color);">
        <h3 style="margin-top:0; color:var(--text-strong); border-bottom: 2px solid var(--accent-primary); padding-bottom: 12px; display: inline-block;">Driver 更新步驟：</h3>

        <div style="margin-top: 24px;">
            <div class="sop-step">
                <span class="sop-step-title">Step 1. 進入 Bootloader</span>
                <p>在 Terminal 輸入 <code>adb reboot bootloader</code>，樣機會進入 Bootloader 界面。</p>
            </div>

            <div class="sop-step">
                 <span class="sop-step-title">Step 2. 檢查 Driver</span>
                <p>進入第一層後，輸入 <code>fastboot devices</code> 檢查電腦有無 driver。如果沒 driver，電腦在第一層會找不到樣機型號。</p>
                <p><strong>如果找不到型號，請打開「裝置管理員」，你應該能看到一個帶有警示符號的 Android 裝置：</strong></p>
                <img src="{{ url_for('static', filename='driver.jpg') }}" class="sop-image" alt="裝置管理員警示">
            </div>

            <div class="sop-step">
                 <span class="sop-step-title">Step 3. 更新驅動程式</span>
                 <p>請對著該有警示的裝置按右鍵，選擇「更新驅動程式」。</p>
                 <img src="{{ url_for('static', filename='driver2.jpg') }}" class="sop-image" alt="選擇更新驅動程式">
            </div>

            <div class="sop-step">
                 <span class="sop-step-title">Step 4. 選擇驅動程式路徑</span>
                 <p>驅動程式附在內網中，請先確認您已可存取此路徑：<br>
                 <code>\\10.57.41.153\user$\QA\XTS\Pretest\usb_driver_r13-windows\usb_driver</code><br>
                 (帳號: fih；密碼: Foxconn123)</p>
                 <p>回到更新畫面，點選「瀏覽電腦上的驅動程式」。</p>
                 <img src="{{ url_for('static', filename='driver3.jpg') }}" class="sop-image" alt="瀏覽電腦上的驅動程式">
            </div>

            <div class="sop-step">
                 <span class="sop-step-title">Step 5. 從清單挑選</span>
                 <p>接著點選下方的「讓我從電腦上的可用驅動程式清單中挑選」。</p>
                 <img src="{{ url_for('static', filename='driver4.jpg') }}" class="sop-image" alt="從清單挑選">
            </div>

            <div class="sop-step">
                 <span class="sop-step-title">Step 6. 選擇裝置類型</span>
                 <p>在清單中找到並點選「Android Device」或「Google, Inc.」之類的選項，按下一步。</p>
                 <img src="{{ url_for('static', filename='driver5.jpg') }}" class="sop-image" alt="選擇 Android Device">
            </div>

            <div class="sop-step">
                 <span class="sop-step-title">Step 7. 選擇 Bootloader Interface</span>
                 <p>在型號清單中，選擇「Android Bootloader Interface」，並按下一步。</p>
                 <img src="{{ url_for('static', filename='driver6.jpg') }}" class="sop-image" alt="選擇 Bootloader Interface">
            </div>

            <div class="sop-step">
                 <span class="sop-step-title">Step 8. 完成更新</span>
                 <p>系統會跳出更新警告視窗，請按「是」，即可完成更新。</p>
                 <img src="{{ url_for('static', filename='driver7.jpg') }}" class="sop-image" alt="完成更新">
                <p>更新完畢 Terminal 會顯示進入燒錄步驟，等待樣機完成燒錄並重新開機。</p>

                <p style="background: #fee2e2; color: #b91c1c; padding: 12px; border-radius: 6px; border-left: 4px solid #ef4444; margin-top: 20px;">
                    <strong>⚠ 注意：</strong> 若 Driver 更新後樣機依舊無法正確被 PC 辨識，請立即詢問 PM 或 RD，確認該專案是否有特殊 Driver 或特殊安裝步驟。
                </p>
            </div>
        </div>
    </div>
  </div>

  <div class="flash-section" id="gsi">
    <div class="flash-section-header">
      <div class="flash-section-title">CTS-on-GSI 燒錄流程 SOP</div>
      <span class="flash-section-tag">CTS-ON-GSI</span>
    </div>

    <p>CTS-on-GSI 需要額外從內網中下載Google System Image 做燒錄，步驟如下：</p>

    <div class="sop-step">
        <span class="sop-step-title">Step 1. 進入內網 VTS 資料夾</span>
        <p>開啟內網網站：<a href="http://10.57.42.97/XTS/" target="_blank"><strong>http://10.57.42.97/XTS/</strong></a> → 進入 <strong>VTS</strong> 資料夾。</p>
        <img src="{{ url_for('static', filename='GSI.jpg') }}" class="sop-image" alt="GSI Folder">
    </div>

    <div class="sop-step">
        <span class="sop-step-title">Step 2. 選擇對應版本</span>
        <p>依照 JiRA 上標示的 Android 版本選擇，例如 Android 12.1：<br>
        <code>VTS-12.1_r14/</code> → 再進到底下的 <code>R14</code> 子資料夾。</p>
        <img src="{{ url_for('static', filename='GSI3.jpg') }}" class="sop-image" alt="GSI Subfolder">
    </div>

    <div class="sop-step">
        <span class="sop-step-title">Step 3. 下載 GSI Image zip</span>
        <p>在資料夾中找到對應架構的 <strong>signed GSI_arm64 zip</strong>，例如：<br>
        <code>signed-gsi_arm64-img-13267304.zip</code></p>
        <img src="{{ url_for('static', filename='GSI4.jpg') }}" class="sop-image" alt="GSI Zip">
    </div>

    <div class="sop-step">
        <span class="sop-step-title">Step 4. 解壓縮並替換</span>
        <p>下載並解壓縮後，裡面會有一個 system image:</p>
        <img src="{{ url_for('static', filename='GSI5.jpg') }}" class="sop-image" alt="System Image">
        <p>將這個 <strong>system image</strong> 複製到「客戶提供 UserBuild」的資料夾中（根據客戶提供的 SOP，進行 Google System 的燒錄）。</p>
    </div>

    <div style="background: #ecfeff; padding: 20px; border-radius: 8px; margin-top: 20px; border-left: 4px solid var(--accent-primary); color: var(--text-main);">
       <strong style="font-size : 20px">可能遇到情形：</strong>
       <ol style="margin-bottom: 0;">
           <li>客戶提供自家 SOP。</li>
           <li>客戶提供燒錄 bat 檔 :<br>
               將檔案中既有的 <code>system.img</code>，更新成剛才下載對應版本的 <code>system.img</code>。</li>
           <li>若都未提供則 :<br>
               <p>先<code>fastboot devices</code>，電腦認到 devices 後，輸入 <code>fastboot reboot fastboot</code> 進入 fastbootd Mode (第二層)，才能開始燒機。</p>
               <p>在 Fastboot Mode 輸入 <code>fastboot flash system system.img</code>，若為 lock 樣機需去客戶提供資料中找解鎖指令。</p>
               <p>若沒有燒完沒有自動開機的話，輸入 <code>fastboot -w</code> 清除資料，最後輸入 <code>fastboot reboot</code> 重新開機。</p>
           </li>

       </ol>




    </div>
  </div>

  <div class="flash-section" id="vts">
    <div class="flash-section-header">
      <div class="flash-section-title">VTS 燒錄流程</div>
      <span class="flash-section-tag">VTS</span>
    </div>

    <p><strong>VTS 會比 GSI 多燒一個 Vendor-boot-Debug</strong></p>

    <ol>
      <li>客戶一定會需要提供，因此要特別先找 <code>vendor_boot-debug.img</code> 放在哪，若客戶沒提供則盡速跟 PM 反應。</li>
      <li>依客戶 SOP 為準，若無輸入 <code>fastboot flash vendor_boot vendor_boot-debug.img</code>，燒入 VTS。</li>
    </ol>
  </div>

  <div class="back-link">
      <a href="/">← 回到首頁</a>
  </div>

</div>

</body>
</html>